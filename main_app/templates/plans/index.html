{% extends "base.html" %}

{% block content %}

<h1>My Quests</h1>

<p>
  <a class="btn" href="{% url 'plans_create' %}">+ Add a Quest</a>
</p>

{% if plans %}
  <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:16px;">
    {% for plan in plans %}
      <div class="card" style="border: 3px solid {{ plan.color }} !important; border-radius: 12px; postion: relative;">
        <div style="position:absolute; top: 10px; right: 10px; z-index:2; filter: drop-shadow(0 0 6px rgba(0,0,0,0.6));">
          {% if plan.is_completed %}
            <span class="new badge green"  data-badge-caption="completed"></span>
          {% else %}
            <span class="new badge grey" data-badge-caption="in progress"></span>
          {% endif %}
        </div>
        <div class="card-content" style="padding-top: 36px !important;">
          <span class="card-title">
            <a href="{% url 'plans_detail' plan.id %}" style="color: {{plan.color}} !important; font-weight:700; ">
              {{ plan.name }}
            </a>
          </span>

          <p><strong>Duration:</strong> {{ plan.duration }}</p>
          <p><strong>Color:</strong> {{ plan.color }}</p>
        </div>

        <div class="card-action" style="border-top: 2px solid {{ plan.color }} !important; ">
          <a href="{% url 'plans_detail' plan.id %}">View</a>
          <a href="{% url 'plans_update' plan.id %}">Edit</a>
          <a class="red-text" href="{% url 'plans_delete' plan.id %}">Delete</a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No plans yet. Click “Add Plan” to create your first one.</p>
{% endif %}

{% endblock %}
